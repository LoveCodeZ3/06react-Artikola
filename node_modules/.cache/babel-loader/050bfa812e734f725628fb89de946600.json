{"ast":null,"code":"import actionType from \"../actions/actionType\";\nconst isLogin = Boolean(window.localStorage.getItem(\"authToken\")) || Boolean(window.sessionStorage.getItem(\"authToken\"));\nconst userInfo = JSON.parse(window.localStorage.getItem(\"userInfo\")) || JSON.parse(window.sessionStorage.getItem(\"userInfo\"));\nconst initState = { ...userInfo,\n  isLogin,\n  //登录的\n  isLoading: false //等待的 Loading\n\n};\nexport default ((state = initState, action) => {\n  console.log(action);\n\n  switch (action.type) {\n    case actionType.START_LOGIN:\n      return { ...state,\n        isLoading: true\n      };\n\n    case actionType.LOGIN_SUCCESS:\n      return { ...state,\n        ...action.payload.userInfo,\n        isLoading: true,\n        isLogin: true\n      };\n\n    case actionType.LOGIN_FAILEN:\n      return {\n        id: \"\",\n        displayName: '',\n        avatar: '',\n        isLogin: false,\n        isLoading: false,\n        role: ''\n      };\n\n    case actionType.CHANGE_AVATAR:\n      return { ...state,\n        avatar: action.payload.avatar\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["C:/Users/kaituo/Downloads/06Artikola-administrado-master/src/reducers/user.js"],"names":["actionType","isLogin","Boolean","window","localStorage","getItem","sessionStorage","userInfo","JSON","parse","initState","isLoading","state","action","console","log","type","START_LOGIN","LOGIN_SUCCESS","payload","LOGIN_FAILEN","id","displayName","avatar","role","CHANGE_AVATAR"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,uBAAvB;AACA,MAAMC,OAAO,GAAGC,OAAO,CAACC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAD,CAAP,IAAoDH,OAAO,CAACC,MAAM,CAACG,cAAP,CAAsBD,OAAtB,CAA8B,WAA9B,CAAD,CAA3E;AACA,MAAME,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAX,KAAuDG,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACG,cAAP,CAAsBD,OAAtB,CAA8B,UAA9B,CAAX,CAAxE;AACA,MAAMK,SAAS,GAAE,EACb,GAAGH,QADU;AAEbN,EAAAA,OAFa;AAEJ;AACTU,EAAAA,SAAS,EAAC,KAHG,CAGG;;AAHH,CAAjB;AAOA,gBAAe,CAACC,KAAK,GAAEF,SAAR,EAAkBG,MAAlB,KAA2B;AACtCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAOA,MAAM,CAACG,IAAd;AACI,SAAKhB,UAAU,CAACiB,WAAhB;AACI,aAAM,EACF,GAAGL,KADD;AAEFD,QAAAA,SAAS,EAAC;AAFR,OAAN;;AAIJ,SAAKX,UAAU,CAACkB,aAAhB;AACI,aAAM,EACF,GAAGN,KADD;AAEF,WAAGC,MAAM,CAACM,OAAP,CAAeZ,QAFhB;AAGFI,QAAAA,SAAS,EAAC,IAHR;AAIFV,QAAAA,OAAO,EAAC;AAJN,OAAN;;AAOJ,SAAKD,UAAU,CAACoB,YAAhB;AACI,aAAO;AACHC,QAAAA,EAAE,EAAC,EADA;AAEHC,QAAAA,WAAW,EAAC,EAFT;AAGHC,QAAAA,MAAM,EAAC,EAHJ;AAIHtB,QAAAA,OAAO,EAAC,KAJL;AAKHU,QAAAA,SAAS,EAAC,KALP;AAMHa,QAAAA,IAAI,EAAC;AANF,OAAP;;AAQJ,SAAKxB,UAAU,CAACyB,aAAhB;AACI,aAAM,EACF,GAAGb,KADD;AAEFW,QAAAA,MAAM,EAAEV,MAAM,CAACM,OAAP,CAAeI;AAFrB,OAAN;;AAKJ;AACI,aAAOX,KAAP;AA9BR;AAgCH,CAlCD","sourcesContent":["import actionType from \"../actions/actionType\"\r\nconst isLogin = Boolean(window.localStorage.getItem(\"authToken\")) ||Boolean(window.sessionStorage.getItem(\"authToken\"))\r\nconst userInfo = JSON.parse(window.localStorage.getItem(\"userInfo\")) || JSON.parse(window.sessionStorage.getItem(\"userInfo\"))\r\nconst initState ={\r\n    ...userInfo,\r\n    isLogin, //登录的\r\n    isLoading:false,//等待的 Loading\r\n\r\n}\r\n\r\nexport default (state= initState,action)=>{\r\n    console.log(action)\r\n    switch(action.type){\r\n        case actionType.START_LOGIN:\r\n            return{\r\n                ...state,\r\n                isLoading:true\r\n            }\r\n        case actionType.LOGIN_SUCCESS:\r\n            return{\r\n                ...state,\r\n                ...action.payload.userInfo,\r\n                isLoading:true,\r\n                isLogin:true\r\n\r\n            }\r\n        case actionType.LOGIN_FAILEN:\r\n            return {\r\n                id:\"\",\r\n                displayName:'',\r\n                avatar:'',\r\n                isLogin:false,\r\n                isLoading:false,\r\n                role:''\r\n            }\r\n        case actionType.CHANGE_AVATAR:\r\n            return{\r\n                ...state,\r\n                avatar: action.payload.avatar\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}