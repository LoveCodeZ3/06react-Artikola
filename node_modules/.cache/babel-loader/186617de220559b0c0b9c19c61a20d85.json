{"ast":null,"code":"import actionType from \"../actions/actionType\";\nconst isLogin = Boolean(window.localStorage.getItem(\"authToken\")) || Boolean(window.sessionStorage.getItem(\"authToken\"));\nconst userInfo = JSON.parse(window.localStorage.getItem(\"userInfo\")) || JSON.parse(window.sessionStorage.getItem(\"userInfo\"));\nconst initState = { ...userInfo,\n  isLogin,\n  //登录的\n  isLoading: false //等待的 Loading\n\n};\nexport default ((state = initState, action) => {\n  console.log(action);\n\n  switch (action.type) {\n    case actionType.START_LOGIN:\n      return { ...state,\n        isLoading: true\n      };\n\n    case actionType.LOGIN_SUCCESS:\n      return { ...state,\n        ...action.payload.userInfo,\n        isLoading: true,\n        isLogin: true\n      };\n\n    case actionType.LOGIN_FAILEN:\n      return {\n        id: \"\",\n        displayName: '',\n        avatar: '',\n        isLogin: false,\n        isLoading: false,\n        role: ''\n      };\n\n    case actionType.CHANGE_AVATAR:\n      return { ...state,\n        avatar: action.payload.avatar\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["C:/Users/kaituo/Downloads/06Artikola-administrado-master/src/reducers/user.js"],"names":["actionType","isLogin","Boolean","window","localStorage","getItem","sessionStorage","userInfo","JSON","parse","initState","isLoading","state","action","console","log","type","START_LOGIN","LOGIN_SUCCESS","payload","LOGIN_FAILEN","id","displayName","avatar","role","CHANGE_AVATAR"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,uBAAvB;AAEA,MAAMC,OAAO,GAAGC,OAAO,CAACC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAD,CAAP,IAAqDH,OAAO,CAACC,MAAM,CAACG,cAAP,CAAsBD,OAAtB,CAA8B,WAA9B,CAAD,CAA5E;AACA,MAAME,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAX,KAAuDG,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACG,cAAP,CAAsBD,OAAtB,CAA8B,UAA9B,CAAX,CAAxE;AACA,MAAMK,SAAS,GAAG,EAChB,GAAGH,QADa;AAEhBN,EAAAA,OAFgB;AAEP;AACTU,EAAAA,SAAS,EAAE,KAHK,CAGC;;AAHD,CAAlB;AAOA,gBAAe,CAACC,KAAK,GAAGF,SAAT,EAAoBG,MAApB,KAA+B;AAC5CC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAQA,MAAM,CAACG,IAAf;AACE,SAAKhB,UAAU,CAACiB,WAAhB;AACE,aAAO,EACL,GAAGL,KADE;AAELD,QAAAA,SAAS,EAAE;AAFN,OAAP;;AAIF,SAAKX,UAAU,CAACkB,aAAhB;AACE,aAAO,EACL,GAAGN,KADE;AAEL,WAAGC,MAAM,CAACM,OAAP,CAAeZ,QAFb;AAGLI,QAAAA,SAAS,EAAE,IAHN;AAILV,QAAAA,OAAO,EAAE;AAJJ,OAAP;;AAOF,SAAKD,UAAU,CAACoB,YAAhB;AACE,aAAO;AACLC,QAAAA,EAAE,EAAE,EADC;AAELC,QAAAA,WAAW,EAAE,EAFR;AAGLC,QAAAA,MAAM,EAAE,EAHH;AAILtB,QAAAA,OAAO,EAAE,KAJJ;AAKLU,QAAAA,SAAS,EAAE,KALN;AAMLa,QAAAA,IAAI,EAAE;AAND,OAAP;;AAQF,SAAKxB,UAAU,CAACyB,aAAhB;AACE,aAAO,EACL,GAAGb,KADE;AAELW,QAAAA,MAAM,EAAEV,MAAM,CAACM,OAAP,CAAeI;AAFlB,OAAP;;AAKF;AACE,aAAOX,KAAP;AA9BJ;AAgCD,CAlCD","sourcesContent":["import actionType from \"../actions/actionType\"\r\n\r\nconst isLogin = Boolean(window.localStorage.getItem(\"authToken\")) || Boolean(window.sessionStorage.getItem(\"authToken\"))\r\nconst userInfo = JSON.parse(window.localStorage.getItem(\"userInfo\")) || JSON.parse(window.sessionStorage.getItem(\"userInfo\"))\r\nconst initState = {\r\n  ...userInfo,\r\n  isLogin, //登录的\r\n  isLoading: false,//等待的 Loading\r\n\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  console.log(action)\r\n  switch (action.type) {\r\n    case actionType.START_LOGIN:\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      }\r\n    case actionType.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        ...action.payload.userInfo,\r\n        isLoading: true,\r\n        isLogin: true\r\n\r\n      }\r\n    case actionType.LOGIN_FAILEN:\r\n      return {\r\n        id: \"\",\r\n        displayName: '',\r\n        avatar: '',\r\n        isLogin: false,\r\n        isLoading: false,\r\n        role: ''\r\n      }\r\n    case actionType.CHANGE_AVATAR:\r\n      return {\r\n        ...state,\r\n        avatar: action.payload.avatar\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}