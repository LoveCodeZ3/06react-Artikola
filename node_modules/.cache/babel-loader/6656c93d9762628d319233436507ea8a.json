{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/upload/style\";\nimport _Upload from \"antd/es/upload\";\nimport \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"C:\\\\Users\\\\kaituo\\\\Downloads\\\\06Artikola-administrado-master\\\\src\\\\views\\\\Profile\\\\index.js\";\n\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { changeAvatar } from '../../actions/user';\n\nconst mapState = state => ({\n  avatarUrl: state.user.avatar\n});\n\nlet Profile = (_dec = connect(mapState, {\n  changeAvatar\n}), _dec(_class = (_temp = class Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isUploading: false\n    };\n\n    this.handleUploadAvatar = ({\n      file\n    }) => {\n      //file 是 antd 自带的\n      console.log(file);\n      console.log(this.props.avatarUrl);\n      const data = new FormData(); //\n\n      data.append(\"Token\", 'f352d243c1ff585fd0bedc56023e2f3cf88a4b1e:5ptq90Si2dWqmkNkwcDfcq4GfGc=:eyJkZWFkbGluZSI6MTU4OTE2MzcxMCwiYWN0aW9uIjoiZ2V0IiwidWlkIjoiNzE4NjY3IiwiYWlkIjoiMTY4NzczOCIsImZyb20iOiJmaWxlIn0=');\n      data.append('file', file);\n      this.setState({\n        isUploading: true\n      });\n      Axios.post(\"http://up.imgapi.com/\", data).then(resp => {\n        console.log(resp);\n\n        if (resp.status === 200) {\n          this.setState({\n            isUploading: false\n          });\n          this.props.changeAvatar(resp.data.linkurl);\n        } else {// 自行处理错误\n        }\n      }).catch(error => {// 自行处理错误\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(_Card, {\n      title: \"\\u4E2A\\u4EBA\\u8BBE\\u7F6E\",\n      bordered: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(_Upload, {\n      name: \"avatar\",\n      listType: \"picture-card\",\n      className: \"avatar-uploader\",\n      showUploadList: false,\n      customRequest: this.handleUploadAvatar //等待过程\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(_Spin, {\n      spinning: this.state.isUploading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, this.props.avatarUrl ? React.createElement(\"img\", {\n      style: {\n        width: 80,\n        height: 80\n      },\n      src: this.props.avatarUrl,\n      alt: \"\\u5934\\u50CF\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }) : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"\\u70B9\\u51FB\\u4E0A\\u4F20\"))));\n  }\n\n}, _temp)) || _class);\nexport default Profile;","map":{"version":3,"sources":["C:/Users/kaituo/Downloads/06Artikola-administrado-master/src/views/Profile/index.js"],"names":["React","Component","Axios","connect","changeAvatar","mapState","state","avatarUrl","user","avatar","Profile","isUploading","handleUploadAvatar","file","console","log","props","data","FormData","append","setState","post","then","resp","status","linkurl","catch","error","render","width","height"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,YAAR,QAA2B,oBAA3B;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,KAAK;AAGzBC,EAAAA,SAAS,EAAED,KAAK,CAACE,IAAN,CAAWC;AAHG,CAAL,CAAtB;;IAQMC,O,WADLP,OAAO,CAACE,QAAD,EAAW;AAACD,EAAAA;AAAD,CAAX,C,yBAAR,MACMM,OADN,SACsBT,SADtB,CACgC;AAAA;AAAA;AAAA,SAC9BK,KAD8B,GACtB;AACNK,MAAAA,WAAW,EAAE;AADP,KADsB;;AAAA,SAI9BC,kBAJ8B,GAIT,CAAC;AAACC,MAAAA;AAAD,KAAD,KAAY;AAAE;AACjCC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWT,SAAvB;AACA,YAAMU,IAAI,GAAG,IAAIC,QAAJ,EAAb,CAH+B,CAGF;;AAC7BD,MAAAA,IAAI,CAACE,MAAL,CAAY,OAAZ,EACE,wLADF;AAGAF,MAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBN,IAApB;AACA,WAAKO,QAAL,CAAc;AACZT,QAAAA,WAAW,EAAE;AADD,OAAd;AAGAT,MAAAA,KAAK,CAACmB,IAAN,CAAW,uBAAX,EAAoCJ,IAApC,EACGK,IADH,CACSC,IAAD,IAAU;AACdT,QAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAZ;;AACA,YAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvB,eAAKJ,QAAL,CAAc;AACZT,YAAAA,WAAW,EAAE;AADD,WAAd;AAGA,eAAKK,KAAL,CAAWZ,YAAX,CAAwBmB,IAAI,CAACN,IAAL,CAAUQ,OAAlC;AACD,SALD,MAKO,CACL;AACD;AAEF,OAZH,EAaGC,KAbH,CAaSC,KAAK,IAAI,CACd;AACD,OAfH;AAgBD,KA/B6B;AAAA;;AAkC9BC,EAAAA,MAAM,GAAG;AAEP,WACE;AACE,MAAA,KAAK,EAAC,0BADR;AAEE,MAAA,QAAQ,EAAE,KAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,QAAQ,EAAC,cAFX;AAGE,MAAA,SAAS,EAAC,iBAHZ;AAIE,MAAA,cAAc,EAAE,KAJlB;AAKE,MAAA,aAAa,EAAE,KAAKhB,kBALtB,CAK0C;AAL1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE;AACE,MAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWK,WADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAII,KAAKK,KAAL,CAAWT,SAAX,GAAuB;AAAK,MAAA,KAAK,EAAE;AAACsB,QAAAA,KAAK,EAAE,EAAR;AAAYC,QAAAA,MAAM,EAAE;AAApB,OAAZ;AAAqC,MAAA,GAAG,EAAE,KAAKd,KAAL,CAAWT,SAArD;AAAgE,MAAA,GAAG,EAAC,cAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAvB,GACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCALN,CATF,CAJF,CADF;AAyBD;;AA7D6B,C;AAgEhC,eAAeG,OAAf","sourcesContent":["import React, {Component} from 'react'\r\nimport {Card, Upload, Spin,} from 'antd'\r\nimport Axios from 'axios'\r\nimport {connect} from \"react-redux\"\r\nimport {changeAvatar} from '../../actions/user'\r\n\r\nconst mapState = state => ({\r\n\r\n\r\n  avatarUrl: state.user.avatar\r\n\r\n})\r\n\r\n@connect(mapState, {changeAvatar})\r\nclass Profile extends Component {\r\n  state = {\r\n    isUploading: false,\r\n  }\r\n  handleUploadAvatar = ({file}) => { //file 是 antd 自带的\r\n    console.log(file)\r\n    console.log(this.props.avatarUrl)\r\n    const data = new FormData()  //\r\n    data.append(\"Token\",\r\n      'f352d243c1ff585fd0bedc56023e2f3cf88a4b1e:5ptq90Si2dWqmkNkwcDfcq4GfGc=:eyJkZWFkbGluZSI6MTU4OTE2MzcxMCwiYWN0aW9uIjoiZ2V0IiwidWlkIjoiNzE4NjY3IiwiYWlkIjoiMTY4NzczOCIsImZyb20iOiJmaWxlIn0='\r\n    )\r\n    data.append('file', file)\r\n    this.setState({\r\n      isUploading: true\r\n    })\r\n    Axios.post(\"http://up.imgapi.com/\", data)\r\n      .then((resp) => {\r\n        console.log(resp)\r\n        if (resp.status === 200) {\r\n          this.setState({\r\n            isUploading: false\r\n          })\r\n          this.props.changeAvatar(resp.data.linkurl)\r\n        } else {\r\n          // 自行处理错误\r\n        }\r\n\r\n      })\r\n      .catch(error => {\r\n        // 自行处理错误\r\n      })\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    return (\r\n      <Card\r\n        title=\"个人设置\"\r\n        bordered={false}\r\n      >\r\n        <Upload\r\n          name=\"avatar\"\r\n          listType=\"picture-card\"\r\n          className=\"avatar-uploader\"\r\n          showUploadList={false}\r\n          customRequest={this.handleUploadAvatar} //等待过程\r\n\r\n\r\n        >\r\n          <Spin\r\n            spinning={this.state.isUploading}\r\n          >\r\n            {\r\n              this.props.avatarUrl ? <img style={{width: 80, height: 80}} src={this.props.avatarUrl} alt=\"头像\"/> :\r\n                <span>点击上传</span>\r\n            }\r\n          </Spin>\r\n        </Upload>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Profile\r\n"]},"metadata":{},"sourceType":"module"}